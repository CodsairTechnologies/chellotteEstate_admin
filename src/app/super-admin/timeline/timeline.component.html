<div class="p-3">
    <div class="row first-row mb-2">
        <!-- Breadcrumb -->
        <div class="col">
            <div class="breadcrumb">
                <span class="home-icon"><i class="bi bi-house-fill"></i></span>
                <a href="/super-admin/timeline" class="breadcrumb-item">Timeline</a>
            </div>
        </div>

        <!-- Add Button -->
        <div class="col">
            <div class="justify-content-end d-flex">
                <button pButton type="button" label="+Add" class="btn button"
                    (click)="openTimelineModal(false)"></button>
            </div>
        </div>
    </div>

    <!-- Table -->
    <div class="card table-card mb-3">
        <app-table [arrList]="arrList" [arrColumns]="arrColumns" [blnForDelete]="blnForDelete" [blnNoEdit]="blnNoEdit"
            [blnHasSingleview]="blnHasSingleview" (objPresentationEvent)="eventFromTable($event)">
        </app-table>
    </div>
</div>



<!-- Add/Edit Modal -->
<p-dialog [(visible)]="OpenModal" [modal]="true" [style]="{width: '40vw'}" [baseZIndex]="9000" [draggable]="false"
    [resizable]="false" [header]="modalHeader">

    <form [formGroup]="TimelineForm" class="p-fluid m-3">

        <!-- Description -->
        <div class="mb-3">
            <label class="form-label">Description <span class="required">*</span></label>
            <textarea class="form-control" formControlName="description" placeholder="Enter description"
                rows="3"></textarea>
            <div class="error-msg2"
                *ngIf="TimelineForm.get('description')?.touched && TimelineForm.get('description')?.invalid">
                <p class="error-msg2" *ngIf="TimelineForm.get('description')?.errors?.['required']">Description is
                    required!</p>
            </div>
        </div>

        <!-- Time Period -->
        <div class="mb-3">
            <label class="form-label">Time Period <span class="required">*</span></label>
            <input type="text" class="form-control" formControlName="timePeriod" placeholder="e.g. 1990 - Today" />
            <div class="error-msg2"
                *ngIf="TimelineForm.get('timePeriod')?.touched && TimelineForm.get('timePeriod')?.invalid">
                <p class="error-msg2" *ngIf="TimelineForm.get('timePeriod')?.errors?.['required']">
                    Time Period is required!
                </p>
            </div>
        </div>
    </form>

    <ng-template pTemplate="footer">
        <button pButton type="button" class="submit-btn" (click)="handleTimelineOperation()">Save</button>
    </ng-template>
</p-dialog>

<!-- Single View Modal -->
<p-dialog [(visible)]="displaySingleViewModal" header="Timeline Details" [modal]="true" [style]="{width: '45vw'}"
    [closable]="true" [dismissableMask]="true">
    <div *ngIf="selectedTimeline" class="singleview-body p-3">
        <!-- <div class="mb-3">
            <label class="form-label">Title</label>
            <p class="form-control-plaintext">{{ selectedTimeline.title }}</p>
        </div> -->

        <div class="mb-3">
            <label class="form-label">Description</label>
            <p class="form-control-plaintext">{{ selectedTimeline.description }}</p>
        </div>

        <div class="mb-3">
            <label class="form-label">Period</label>
            <p class="form-control-plaintext">{{ selectedTimeline.date }}</p>
        </div>

    </div>
</p-dialog>

<!-- Delete Modal -->
<p-dialog [(visible)]="deleteModal" [modal]="true" [style]="{width: '35vw'}" [baseZIndex]="10000" [draggable]="false"
    [resizable]="false">
    <ng-template pTemplate="header">
        <div class="d-flex align-items-center">
            <i class="bi bi-exclamation-triangle"></i>
            <span>Delete Timeline</span>
        </div>
    </ng-template>

    <div>
        <p class="justify-content-center d-flex mt-3 delete-para">
            Are you sure you want to delete this Timeline?
        </p>
    </div>

    <ng-template pTemplate="footer">
        <div class="justify-content-center d-flex">
            <button type="button" pButton class="close-btn" (click)="deleteModal = false">Close</button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button type="button" pButton class="delete-btn" (click)="deleteFn()">Delete</button>
        </div>
    </ng-template>
</p-dialog>

<!-- Loader -->
<div *ngIf="Loader" class="spinner-container">
    <div class="spinner"></div>
</div>