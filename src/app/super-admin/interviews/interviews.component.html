<div class="p-3">
    <div class="row  first-row mb-2">
        <!-- breadcrumbs -->
        <div class="col">
            <div class="breadcrumb">
                <span class="home-icon"><i class="bi bi-house-fill"></i></span>
                <!-- <a href="/super-admin/Dashboard" class="breadcrumb-item">Dashboard</a>

                <span class="arrow-icon"><i class="bi bi-caret-right-fill"></i></span> -->

                <!-- Show this link only in edit mode -->

                <a href="/super-admin/listinterviews" class="breadcrumb-item">Interviews</a>
                <span class="arrow-icon"><i class="bi bi-caret-right-fill"></i></span>

                <a href="/super-admin/interviews" class="breadcrumb-item">
                    {{ isEditMode ? 'Edit Interviews' : 'Add Interviews' }}
                </a>
            </div>


        </div>
        <!-- breadcrumbs -->
    </div>

    <div class="card table-card mb-3 p-4 m-4 border rounded shadow-sm bg-white">
        <form [formGroup]="InterviewForm">

            <!-- === Author Details Section === -->
            <div class="border rounded p-3 mb-4 bg-light">
                <h6 class="section-title mb-3">Interviewer Details</h6>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-semibold">Interviewer Name <span class="required">*</span></label>
                        <input type="text" class="form-control" formControlName="authorName"
                            placeholder="Enter author's name">
                        <div
                            *ngIf="InterviewForm.get('authorName')?.invalid && InterviewForm.get('authorName')?.touched">
                            <p class="error-msg2">Interviewer name is required!</p>
                        </div>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-semibold">Designation </label>
                        <input type="text" class="form-control" formControlName="designation"
                            placeholder="Poet, Writer, etc.">
                        <!-- <div
                            *ngIf="InterviewForm.get('designation')?.invalid && InterviewForm.get('designation')?.touched">
                            <p class="error-msg2">Designation is required!</p>
                        </div> -->
                    </div>
                </div>

                <div class="mb-3">
                    <label class="form-label fw-semibold">About Interviewer </label>
                    <textarea rows="3" class="form-control" formControlName="aboutAuthor"
                        placeholder="Write something about the author..."></textarea>
                    <!-- <div *ngIf="InterviewForm.get('aboutAuthor')?.invalid && InterviewForm.get('aboutAuthor')?.touched">
                        <p class="error-msg2">About Interviewer is required!</p>
                    </div> -->
                </div>

                <div class="row">
                    <div class="col-md-4 mb-3 position-relative">
                        <label class="form-label fw-semibold">Interviewer Image</label>

                        <div class="border rounded overflow-hidden text-center position-relative"
                            style="width: 200px; height: 200px; cursor: pointer;" (click)="authorImgInput.click()"
                            (dragover)="onAuthorDragOver($event)" (dragleave)="onAuthorDragLeave($event)"
                            (drop)="onAuthorFileDrop($event)" [class.dragover]="isAuthorDragOver">

                            <!-- Preview -->
                            <img *ngIf="showAuthorImgBox" [src]="authorImgPreview"
                                class="w-100 h-100 object-fit-contain rounded bg-light" />

                            <!-- Placeholder / instructions -->
                            <div *ngIf="!showAuthorImgBox"
                                class="d-flex flex-column justify-content-center align-items-center h-100 text-muted text-center">
                                <i class="bi bi-upload display-4 mb-2"></i>
                                <p class="mb-0 small">
                                    Drag & drop or click to upload
                                </p>
                            </div>

                            <!-- Hidden file input -->
                            <input type="file" class="d-none" (change)="onAuthorImageUpload($event)" #authorImgInput
                                accept="image/*" />

                            <!-- Remove button -->
                            <i *ngIf="showAuthorImgBox"
                                class="bi bi-x-circle-fill position-absolute top-0 end-0 text-danger"
                                style="cursor:pointer; font-size:1.5rem;" (click)="clearAuthorImage()"></i>

                            <!-- <div class="mt-2 error-msg2"
                                *ngIf="InterviewForm.get('authorImage')?.invalid && InterviewForm.get('authorImage')?.touched">
                                Interviewer image is required!
                            </div> -->
                        </div>


                    </div>
                </div>

            </div>

            <!-- === Interview Content Section === -->
            <div class="border rounded p-3 mb-3 bg-light">
                <h6 class="section-title mb-3">Interview Details <span class="required">*</span></h6>

                <div class="mb-3">
                    <label class="form-label fw-semibold">Interview Title</label>
                    <input type="text" class="form-control" formControlName="InterviewTitle"
                        placeholder="Enter Interview title">
                    <div
                        *ngIf="InterviewForm.get('InterviewTitle')?.invalid && InterviewForm.get('InterviewTitle')?.touched">
                        <p class="error-msg2">Interview title is required!</p>
                    </div>
                </div>

                <div class="mb-3">
                    <label class="form-label fw-semibold">Interview Content <span class="required">*</span></label>
                    <div class="quill-wrapper" style="height: 400px; width: 100%;">
                        <quill-editor formControlName="InterviewContent" [style]="{height: '100%', width: '100%'}"
                            theme="snow"></quill-editor>
                    </div>
                    <div
                        *ngIf="InterviewForm.get('InterviewContent')?.invalid && InterviewForm.get('InterviewContent')?.touched">
                        <p class="error-msg2">Interview content is required!</p>
                    </div>
                </div>

                <div class="mb-3 w-75 position-relative">
                    <label class="form-label fw-semibold">Banner Image <span class="required">*</span></label>

                    <div class="border rounded overflow-hidden" style="height: 200px; cursor: pointer;"
                        (click)="coverFileInput.click()">
                        <img *ngIf="showCoverBox" [src]="coverPreview" class="w-100 h-100"
                            style="object-fit: contain;" />
                        <div *ngIf="!showCoverBox"
                            class="d-flex flex-column justify-content-center align-items-center h-100 text-muted">
                            <i class="bi bi-upload display-4"></i>
                            <p class="mb-0 small">Upload banner (Max: 5MB, Min: 1280x480, 16:6)</p>
                        </div>
                        <input type="file" class="d-none" (change)="onCoverUpload($event)" #coverFileInput
                            accept="image/*" />
                    </div>

                    <i *ngIf="showCoverBox" class="bi bi-x-circle-fill position-absolute top-0 end-0 text-danger"
                        style="cursor:pointer; font-size:1.5rem;" (click)="clearCoverImage()"></i>

                    <div *ngIf="InterviewForm.get('bannerImage')?.invalid && InterviewForm.get('bannerImage')?.touched">
                        <p class="error-msg2 mt-1">Banner Image is required!</p>
                    </div>
                </div>

            </div>
        </form>

        <div class="text-end mt-3">
            <button type="button" class="btn save-btn" (click)="handleInterviewsubmit()">Save</button>
        </div>
    </div>

</div>

<div *ngIf="Loader" class="spinner-container">
    <div class="spinner"></div>
</div>