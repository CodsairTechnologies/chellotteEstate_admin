<div class="p-3">
    <div class="row  first-row mb-2">
        <!-- breadcrumbs -->
        <div class="col">
            <div class="breadcrumb">
                <span class="home-icon"><i class="bi bi-house-fill"></i></span>
                <!-- <a href="/super-admin/Dashboard" class="breadcrumb-item">Dashboard</a>
                <span class="arrow-icon"><i class="bi bi-caret-right-fill"></i></span> -->
                <a href="/super-admin/banner" class="breadcrumb-item">Home Banner</a>
            </div>
        </div>
        <!-- breadcrumbs -->

        <!-- button -->
        <div class="col">
            <div class="justify-content-end d-flex">
                <button pButton type="button" label="+Add" class="btn button"
                    (click)="openCategoryModal(false)"></button>
            </div>
        </div>
        <!-- button -->
    </div>

    <div class="card table-card mb-3">
        <app-table [arrList]="arrList" [arrColumns]="arrColumns" [blnForDelete]="blnForDelete" [blnNoEdit]="blnNoEdit"
            [blnHasSingleview]="blnHasSingleview" (objPresentationEvent)="eventFromTable($event)">
        </app-table>
    </div>
</div>



<p-dialog [(visible)]="OpenModal" [modal]="true" [style]="{width: '40vw'}" [baseZIndex]="9000" [draggable]="false"
    [resizable]="false" [header]="modalHeader">

    <div class="modal-body">
        <form [formGroup]="BannerForm">
            <!-- Full-width image/video upload -->
            <div class="mb-3">
                <label class="form-label">
                    Upload Image <span class="required">*</span>
                </label>
                <br>
                <small class="text-muted">Recommended size: 1280 Ã— 480 px (16:6 aspect ratio, Max: 5MB)</small>

                <div class="img-card card mt-2">
                    <div *ngIf="!showImageBox">
                        <button type="button" class="btn uploadbtn" (click)="selectfile.click()">Choose File</button>
                        <input type="file" class="form-control d-none" (change)="onFileUpload($event)" #selectfile
                            accept="image/*">
                    </div>

                    <div *ngIf="showImageBox" class="img-div position-relative w-100">
                        <!-- Image Preview -->
                        <img *ngIf="fileType?.startsWith('image/')" [src]="imagePreview"
                            class="img-preview img-fluid w-100" />
                        <i class="bi bi-x-circle-fill position-absolute top-0 end-0 text-danger"
                            style="cursor: pointer;" (click)="clearCard()"></i>
                    </div>
                </div>

                <!-- Validation -->
                <div class="error-msg2 mt-2"
                    *ngIf="BannerForm.get('image')?.invalid && BannerForm.get('image')?.touched">
                    <p class="error-msg2">Image is required!</p>
                </div>
            </div>


            <!-- Title -->
            <div class="mb-3">
                <label class="form-label">Title </label>
                <textarea class="form-control" formControlName="title" placeholder="Enter banner title"
                    rows="2"></textarea>
                <div *ngIf="BannerForm.get('title')?.touched">
                    <!-- <p class="error-msg2" *ngIf="BannerForm.get('title')?.errors?.['required']">
                        Title is required!
                    </p> -->
                    <p class="error-msg2" *ngIf="BannerForm.get('title')?.errors?.['maxlength']">
                        Maximum 80 characters allowed!
                    </p>
                </div>
            </div>

            <!-- Subtitle -->
            <div class="mb-3">
                <label class="form-label">Subtitle</label>
                <textarea class="form-control" formControlName="subtitle" placeholder="Enter subtitle"
                    rows="3"></textarea>
                <div *ngIf="BannerForm.get('subtitle')?.touched">
                    <!-- <p class="error-msg2" *ngIf="BannerForm.get('subtitle')?.errors?.['required']">
                        Subtitle is required!
                    </p> -->
                    <p class="error-msg2" *ngIf="BannerForm.get('subtitle')?.errors?.['maxlength']">
                        Maximum 100 characters allowed!
                    </p>
                </div>
            </div>


            <!-- Link -->
            <!-- <div class="mb-3">
                <label class="form-label">Link</label>
                <input type="text" class="form-control" formControlName="link" placeholder="Enter link (optional)">
            </div> -->
        </form>
    </div>

    <ng-template pTemplate="footer">
        <button type="submit" pButton (click)="handleBannerOperation()" class="submit-btn">Save</button>
    </ng-template>
</p-dialog>



<!-- Single View Modal -->
<p-dialog [(visible)]="displaySingleViewModal" header="Banner Details" [modal]="true" [style]="{width: '50vw'}"
    [closable]="true" [dismissableMask]="true">

    <div *ngIf="selectedBanner" class="singleview-body p-3">
        <div class="text-center mb-3">
            <img [src]="getImageUrl(selectedBanner.bannerurl)" alt="Banner Image"
                class="img-fluid rounded singleview-image" />
        </div>

        <div class="form-group mb-3" *ngIf="selectedBanner.title">
            <label class="form-label">Title</label>
            <p class="form-control-plaintext">{{ selectedBanner.title }}</p>
        </div>

        <div class="form-group mb-3" *ngIf="selectedBanner.description">
            <label class="form-label">Subtitle</label>
            <p class="form-control-plaintext">{{ selectedBanner.description }}</p>
        </div>

        <!-- <div class="form-group mb-3" *ngIf="selectedBanner.link">
            <label class="form-label">Link</label>
            <p class="form-control-plaintext">
                <a [href]="selectedBanner.link" target="_blank">{{ selectedBanner.link }}</a>
            </p>
        </div> -->

    </div>
</p-dialog>




<p-dialog [(visible)]="deleteModal" [modal]="true" [style]="{width: '35vw'}" [baseZIndex]="10000" [draggable]="false"
    [resizable]="false">
    <ng-template pTemplate="header">
        <div class="d-flex align-items-center">
            <i class="bi bi-exclamation-triangle"></i>
            <span>Delete Banner</span>
        </div>
    </ng-template>

    <div>
        <p class="justify-content-center d-flex mt-3 delete-para">Are you sure you want to delete this Banner?</p>
    </div>

    <ng-template pTemplate="footer">
        <div class="justify-content-center d-flex">
            <button type="button" pButton class=" close-btn"
                (click)="deleteModal = false">Close</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button type="button" pButton class="delete-btn" (click)="deleteFn()">Delete</button>
        </div>
    </ng-template>
</p-dialog>

<div *ngIf="Loader" class="spinner-container">
    <div class="spinner"></div>
</div>