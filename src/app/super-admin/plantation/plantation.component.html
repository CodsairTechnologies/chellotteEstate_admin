<div class="p-3">
    <div class="row first-row mb-2">
        <!-- Breadcrumb -->
        <div class="col">
            <div class="breadcrumb">
                <span class="home-icon"><i class="bi bi-house-fill"></i></span>
                <a href="/super-admin/plantation" class="breadcrumb-item">Plantation</a>
            </div>
        </div>

        <!-- Add Button -->
        <div class="col">
            <div class="justify-content-end d-flex">
                <button pButton type="button" label="+Add" class="btn button"
                    (click)="openPlantationModal(false)"></button>
            </div>
        </div>
    </div>

    <!-- Table -->
    <div class="card table-card mb-3">
        <app-table [arrList]="arrList" [arrColumns]="arrColumns" [blnForDelete]="blnForDelete" [blnNoEdit]="blnNoEdit"
            [blnHasSingleview]="blnHasSingleview" (objPresentationEvent)="eventFromTable($event)">
        </app-table>
    </div>
</div>

<!-- Add/Edit Modal -->
<p-dialog [(visible)]="openModal" [modal]="true" [style]="{ width: '50vw' }" [draggable]="false" [resizable]="false"
    [header]="modalHeader">
    <form [formGroup]="PlantationForm" class="p-fluid">
        <div class="mb-3">
            <label class="form-label">Title <span class="required">*</span></label>
            <input type="text" formControlName="title" class="form-control" placeholder="Enter title" />
            <div *ngIf="PlantationForm.get('title')?.touched && PlantationForm.get('title')?.invalid"
                class="error-msg2">
                Title is required.
            </div>
        </div>

        <div class="mb-3">
            <label class="form-label">Description <span class="required">*</span></label>
            <textarea formControlName="description" class="form-control" rows="4"
                placeholder="Enter description"></textarea>
            <div *ngIf="PlantationForm.get('description')?.touched && PlantationForm.get('description')?.invalid"
                class="error-msg2">
                Description is required.
            </div>
        </div>

        <!-- Image 1 -->
        <div class="mb-3">
            <label class="form-label">Image 1 <span class="required">*</span></label>
            <div class="img-card card mt-2 text-center">
                <div *ngIf="!showImage1">
                    <button type="button" class="btn uploadbtn" (click)="fileInput1.click()">Choose File</button>
                    <input type="file" #fileInput1 class="d-none" (change)="onFileUpload($event, 'image1')"
                        accept="image/*" />
                </div>
                <div *ngIf="showImage1" class="img-div position-relative">
                    <img [src]="image1Preview" class="img-preview img-fluid w-100" />
                    <i class="bi bi-x-circle-fill text-danger position-absolute top-0 end-0"
                        (click)="clearImage('image1')"></i>
                </div>
            </div>
        </div>

        <!-- Image 2 -->
        <div class="mb-3">
            <label class="form-label">Image 2 <span class="required">*</span></label>
            <div class="img-card card mt-2 text-center">
                <div *ngIf="!showImage2">
                    <button type="button" class="btn uploadbtn" (click)="fileInput2.click()">Choose File</button>
                    <input type="file" #fileInput2 class="d-none" (change)="onFileUpload($event, 'image2')"
                        accept="image/*" />
                </div>
                <div *ngIf="showImage2" class="img-div position-relative">
                    <img [src]="image2Preview" class="img-preview img-fluid w-100" />
                    <i class="bi bi-x-circle-fill text-danger position-absolute top-0 end-0"
                        (click)="clearImage('image2')"></i>
                </div>
            </div>
        </div>
    </form>

    <ng-template pTemplate="footer">
        <button pButton type="button" label="Save" class="submit-btn" (click)="handlePlantationOperation()"></button>
    </ng-template>
</p-dialog>

<!-- Single View Modal -->
<p-dialog [(visible)]="displaySingleViewModal" header="Plantation Details" [modal]="true" [style]="{ width: '50vw' }"
    [closable]="true" [dismissableMask]="true">
    <div *ngIf="selectedPlantation" class="p-3 text-center">

        <!-- Title Section -->
        <div class="mb-3 text-left">
            <h6 class="text-muted">Title:</h6>
            <h5>{{ selectedPlantation.title }}</h5>
        </div>

        <!-- Description Section -->
        <div class="mb-3 text-left">
            <h6 class="text-muted">Description:</h6>
            <p>{{ selectedPlantation.description }}</p>
        </div>

        <!-- Images -->
        <div class="row">
            <div class="col text-center">
                <!-- <h6 class="text-muted">Image 1:</h6> -->
                <img [src]="getImageUrl(selectedPlantation.image1)" class="img-fluid rounded" width="250"
                    height="250" />
            </div>
            <div class="col text-center">
                <!-- <h6 class="text-muted">Image 2:</h6> -->
                <img [src]="getImageUrl(selectedPlantation.image2)" class="img-fluid rounded" width="250"
                    height="250" />
            </div>
        </div>

    </div>
</p-dialog>


<!-- Delete Modal -->
<p-dialog [(visible)]="deleteModal" [modal]="true" [style]="{ width: '35vw' }" [baseZIndex]="10000">
    <ng-template pTemplate="header">
        <div class="d-flex align-items-center">
            <i class="bi bi-exclamation-triangle"></i>
            <span>Delete Plantation</span>
        </div>
    </ng-template>

    <p class="text-center mt-3">Are you sure you want to delete this record?</p>

    <ng-template pTemplate="footer">
        <div class="d-flex justify-content-center">
            <button pButton label="Close" class="close-btn" (click)="deleteModal = false"></button>
            &nbsp;&nbsp;
            <button type="button" pButton class="delete-btn" (click)="deleteFn()">Delete</button>
        </div>
    </ng-template>
</p-dialog>

<!-- Loader -->
<div *ngIf="Loader" class="spinner-container">
    <div class="spinner"></div>
</div>