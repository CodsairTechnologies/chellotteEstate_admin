<p-table [columns]="arrColumns" [value]="arrList" [paginator]="true" [rows]="rows" [showCurrentPageReport]="true"
    [(first)]="first" [rowsPerPageOptions]="[10,25,50,100]" styleClass="custom-paginator">

    <!-- <ng-template pTemplate="header" let-columns>
        <tr class="table-heading">
            <th *ngFor="let col of columns" [ngStyle]="getColumnStyles(col,'th')" class="table-th">
                {{col.strHeader}}
            </th>
        </tr>
    </ng-template> -->


    <ng-template pTemplate="header" let-columns>
        <tr class="table-heading">
            <th *ngFor="let col of columns" [ngStyle]="getColumnStyles(col, 'th')" class="table-th"
                [pSortableColumn]="col.sortable ? col.field : null">

                {{ col.strHeader }}
                <ng-container *ngIf="col.sortable">
                    <p-sortIcon>
                        <i *ngIf="sortColumn === col.strKey && sortOrder" class="bi bi-arrow-down-circle"></i>
                        <i *ngIf="sortColumn === col.strKey && !sortOrder" class="bi bi-arrow-up-circle"></i>
                    </p-sortIcon>
                </ng-container>
            </th>
        </tr>
    </ng-template>

    <ng-template pTemplate="body" let-rowData let-columns="columns" class="common-table">
        <tr class="table-content">
            <td *ngFor="let col of columns;let lastCol = last" [ngStyle]="getColumnStyles(col,'td')" class="table-td">
                <span *ngIf="col.strKey !=='strActions';else actions">
                    <ng-container *ngIf="col.strKey === 'imageurl'">
                        <img [src]="getImageUrl(rowData[col.strKey])" alt="Image" class="img-thumbnail"
                            style="width: 60px; height: 60px; object-fit: cover; cursor: pointer;"
                            (click)="openImageModal(getImageUrl(rowData[col.strKey]))" />
                    </ng-container>

                    <ng-container *ngIf="col.strKey === 'bannerurl' && rowData[col.strKey]">
                        <img [src]="getImageUrl(rowData[col.strKey])" alt="Banner" class="img-thumbnail"
                            style="width: 60px; height: 60px; object-fit: cover; cursor: pointer;"
                            (click)="openImageModal(getImageUrl(rowData[col.strKey]))" />
                    </ng-container>

                    <ng-container *ngIf="col.strKey === 'bannerimage' && rowData[col.strKey]">
                        <img [src]="getImageUrl(rowData[col.strKey])" alt="Banner" class="img-thumbnail"
                            style="width: 60px; height: 60px; object-fit: cover; cursor: pointer;"
                            (click)="openImageModal(getImageUrl(rowData[col.strKey]))" />
                    </ng-container>

                    <ng-container *ngIf="col.strKey === 'coverimage' && rowData[col.strKey]">
                        <img [src]="getImageUrl(rowData[col.strKey])" alt="Banner" class="img-thumbnail"
                            style="width: 60px; height: 60px; object-fit: cover; cursor: pointer;"
                            (click)="openImageModal(getImageUrl(rowData[col.strKey]))" />
                    </ng-container>

                    <ng-container *ngIf="col.strKey === 'bookcoverimage' && rowData[col.strKey]">
                        <img [src]="getImageUrl(rowData[col.strKey])" alt="Banner" class="img-thumbnail"
                            style="width: 60px; height: 60px; object-fit: cover; cursor: pointer;"
                            (click)="openImageModal(getImageUrl(rowData[col.strKey]))" />
                    </ng-container>


                    <ng-container *ngIf="col.strKey === 'image'">
                        <img [src]="getImageUrl(rowData[col.strKey])" alt="Banner" class="img-thumbnail"
                            style="width: 60px; height: 60px; object-fit: cover; cursor: pointer;"
                            (click)="openImageModal(getImageUrl(rowData[col.strKey]))" />
                    </ng-container>


                    <!-- <ng-container *ngIf="col.strKey =='strStatus'">
                        <div class="form-check form-switch justify-content-center d-flex">
                            <input class="form-check-input custom-toggle" [checked]="rowData.status==='Active'"
                                type="checkbox" role="switch" (change)="toggleTableData(rowData,$event)">
                            <label class="form-check-label"></label>
                        </div>
                    </ng-container> -->

                    <ng-container *ngIf="col.strKey === 'strStatus'">
                        <div class="d-flex justify-content-center">
                            <button class="btn status-button" [ngClass]="{
              'active-btn': rowData.status === 'Active',
              'inactive-btn': rowData.status === 'Inactive'
            }" (click)="toggleStatus(rowData)"
                                [title]="rowData.status === 'Active' ? 'Click to inactive' : 'Click to activate'">
                                {{ rowData.status === 'Active' ? 'Active' : 'Inactive' }}
                            </button>
                        </div>
                    </ng-container>






                    <ng-container
                        *ngIf="col.strKey !== 'strActions' && col.strKey != 'strStatus' && col.strKey !== 'imageurl' && col.strKey !== 'bannerurl' && col.strKey !== 'image' && col.strKey !== 'bannerimage' && col.strKey !== 'coverimage'  && col.strKey !== 'bookcoverimage' ">

                        <span *ngIf="rowData[col.strKey] as cellValue">
                            {{ isExpanded(rowData, col.strKey)
                            ? cellValue
                            : (cellValue?.toString() | slice:0:52) }}
                            <ng-container *ngIf="cellValue?.toString().length > 52">
                                <a class="see-toggle" (click)="toggleExpand(rowData, col.strKey)">
                                    {{ isExpanded(rowData, col.strKey) ? 'See less' : 'See more' }}
                                </a>
                            </ng-container>
                        </span>

                    </ng-container>



                </span>
                <ng-template #actions>
                    <button class="button" *ngIf="blnHasSingleview" (click)="singleviewTableData(rowData)"
                        title="View Details">
                        <i class="bi bi-eye-fill"></i>
                    </button>&nbsp;

                    <ng-container>
                        <button *ngIf="blnNoEdit" class="button" (click)="editTableData(rowData)" title="Edit">
                            <i class="bi bi-pencil-fill"></i>
                        </button> &nbsp;

                        <button class="button" *ngIf="blnForDelete" (click)="dltTableData(rowData)" title="Delete">
                            <i class="bi bi-trash-fill"></i>
                        </button>
                    </ng-container>

                    <button class="button" *ngIf="blnHasDown" title="More Options">
                        <i class="bi bi-chevron-down"></i>
                    </button>
                </ng-template>

            </td>
        </tr>
    </ng-template>
</p-table>


<p-dialog [(visible)]="displayImageModal" [modal]="true" [closable]="true" [showHeader]="false"
    [style]="{ width: '40vw' }" [contentStyle]="{ padding: '0', overflow: 'hidden' }">
    <div class="image-preview-container">
        <img [src]="selectedImageUrl" alt="Selected Image" class="modal-image" />
    </div>
</p-dialog>


<!-- <p-dialog [(visible)]="displayImageModal"
          [modal]="true"
          [closable]="true"
          [showHeader]="false"
          [draggable]="false"
          [resizable]="false"
          [style]="{ width: 'auto' }"
          [contentStyle]="{ padding: '0', overflow: 'hidden' }">
    <img [src]="selectedImageUrl" alt="Selected Image" class="modal-image" />
</p-dialog>
 -->